(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{W8ZA:function(n,t,l){"use strict";l.r(t);var a=l("8Y7J");class e{}var o=l("pMnS"),i=l("oBZk"),u=l("ZZ/e"),d=l("mE01"),r=l("s7LF"),c=l("SVse"),p=l("mrSG"),s=l("wd/R"),_=l("fhOw");class g{constructor(n,t,l){this.route=n,this.datapointsService=t,this.toastController=l,this.chart=new d.a({chart:{type:"line",reflow:!0,height:200,marginLeft:40},title:{text:void 0},credits:{enabled:!1},xAxis:{type:"datetime"},yAxis:{title:{text:null}},legend:{enabled:!1},series:[]}),this.datapoint={dataPointId:this.route.snapshot.params.id,value:0},this.value={},this.values=[],this.getDatapoint(),this.getDatapointValues()}ngOnInit(){}getDatapoint(){this.datapointsService.getDatapoint(this.datapoint.dataPointId).then(n=>{this.datapoint.dataPointName=n.dataPointName})}add(){this.datapoint.value+=1,this.datapointsService.addValue(this.datapoint,{value:1}).then(n=>{console.log(n),this.datapoint.last_added=new Date,this.datapoint.value=n.value,this.values.push({value:n.value,date:new Date}),this.valueAdded(),this.getDatapointValues(),this.datapointsService.datapointsChanged(this.datapoint.dataPointId)})}valueAdded(){return p.b(this,void 0,void 0,(function*(){(yield this.toastController.create({message:'<ion-icon name="md-checkmark"></ion-icon> Changes Saved',duration:2e3,color:"dark",mode:"md",buttons:[{side:"end",text:"Undo",handler:()=>{this.datapoint.value-=1,this.datapointsService.addValue(this.datapoint,{value:-1}).then(n=>{console.log(n),this.datapoint.last_added=new Date,this.datapoint.value=n.value,this.datapointsService.datapointsChanged(this.datapoint.dataPointId)})}}]})).present()}))}setAmount(){this.datapoint.value+=this.value.value,this.value.loading=!0,this.datapointsService.addValue(this.datapoint,{value:this.value.value}).then(n=>{console.log(n),this.datapoint.last_added=new Date,this.datapoint.value=n.value,this.values.push({value:n.value,date:new Date}),this.value.value="",this.value.date="",this.value.time="",this.value.loading=!1,this.datapointsService.datapointsChanged(this.datapoint.dataPointId),this.valueAdded()}).catch(()=>{this.value.loading=!1})}getDatapointValues(){this.datapointsService.getValues(this.datapoint).then(n=>{console.log(n),n&&n.length>0&&(this.datapoint.value=n[n.length-1].value,this.datapoint.last_added=n[n.length-1].date,this.setGraph())})}setGraph(){let n=[];for(let t of this.values)n.push([s(t).toDate(),t.value]);console.log(n),this.chart.removeSeries(0),this.chart.addSeries({name:"Value",color:"#FF015B",data:n,type:void 0},!0,!0)}getIncreaseToday(){let n=s(),t=0;for(let l of this.values)s(l).isSame(n,"day")&&(t+=1);return t}}var b=l("iInd"),h=a.pb({encapsulation:0,styles:[['.datapoint-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-family:"Neatrif Studio",sans-serif!important;font-size:24px;line-height:56px;color:#33395d}.datapoint-header[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]{font-family:"NB International",sans-serif!important}.datapoint[_ngcontent-%COMP%]   .datapoint__datapoint-container[_ngcontent-%COMP%]{border:1px solid #eaecee;border-radius:6px;margin:40px 30px;padding:30px 40px}.datapoint[_ngcontent-%COMP%]   .datapoint__datapoint-container[_ngcontent-%COMP%]   .datapoint__datapoint-container__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;margin-bottom:40px}.datapoint[_ngcontent-%COMP%]   .datapoint__datapoint-container[_ngcontent-%COMP%]   .datapoint__datapoint-container__header[_ngcontent-%COMP%]   .datapoint__datapoint-container__header__count[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1}.datapoint[_ngcontent-%COMP%]   .datapoint__datapoint-container[_ngcontent-%COMP%]   .datapoint__datapoint-container__header[_ngcontent-%COMP%]   .datapoint__datapoint-container__header__count[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:72px;line-height:72px;color:#33395d;margin:0}.datapoint[_ngcontent-%COMP%]   .datapoint__datapoint-container[_ngcontent-%COMP%]   .datapoint__datapoint-container__header[_ngcontent-%COMP%]   .datapoint__datapoint-container__header__count[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#2dca73;font-weight:700;font-size:16px;line-height:16px;margin:0}.datapoint[_ngcontent-%COMP%]   .datapoint__datapoint-container[_ngcontent-%COMP%]   .datapoint__datapoint-container__header[_ngcontent-%COMP%]   .datapoint__datapoint-container__header__action[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:50px;height:50px;color:#b8c7d4}.datapoint[_ngcontent-%COMP%]   .datapoint__datapoint-container[_ngcontent-%COMP%]   .datapoint__datapoint-container__graph[_ngcontent-%COMP%]{width:100%}.datapoint[_ngcontent-%COMP%]   .datapoint__datapoint-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700;font-size:22px;line-height:22px;color:#33395d}.datapoint[_ngcontent-%COMP%]   .datapoint__datapoint-container[_ngcontent-%COMP%]   .datapoint__datapoint-container__form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-color:transparent;margin-bottom:10px}.datapoint[_ngcontent-%COMP%]   .datapoint__datapoint-container[_ngcontent-%COMP%]   .datapoint__datapoint-container__form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%], .datapoint[_ngcontent-%COMP%]   .datapoint__datapoint-container[_ngcontent-%COMP%]   .datapoint__datapoint-container__form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{background-color:#f4f8fb;font-size:16px;border:2px solid #dee7ee;box-sizing:border-box;border-radius:3px;line-height:31px;--padding-start:15px}.datapoint[_ngcontent-%COMP%]   .datapoint__datapoint-container[_ngcontent-%COMP%]   .datapoint__datapoint-container__form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .label-stacked.sc-ion-label-md-h[_ngcontent-%COMP%]{margin-bottom:10px}.datapoint[_ngcontent-%COMP%]   .datapoint__datapoint-container[_ngcontent-%COMP%]   .datapoint__datapoint-container__form[_ngcontent-%COMP%]   .datapoint__datapoint-container__form__row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{width:50%;display:inline-block}.datapoint[_ngcontent-%COMP%]   .datapoint__datapoint-container[_ngcontent-%COMP%]   .datapoint__datapoint-container__form[_ngcontent-%COMP%]   .datapoint__datapoint-container__form__save-button[_ngcontent-%COMP%]{margin-top:25px}.datapoint[_ngcontent-%COMP%]   .datapoint__datapoint-container[_ngcontent-%COMP%]   .datapoint__datapoint-container__form[_ngcontent-%COMP%]   .datapoint__datapoint-container__form__save-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:20px;height:20px;margin-left:10px}']],data:{}});function C(n){return a.Jb(0,[(n()(),a.rb(0,0,null,null,1,"ion-spinner",[],null,null,null,i.Q,i.t)),a.qb(1,49152,null,0,u.sb,[a.h,a.k,a.x],null,null)],null,null)}function m(n){return a.Jb(0,[(n()(),a.rb(0,0,null,null,13,"ion-header",[["class","datapoint-header"]],null,null,null,i.H,i.k)),a.qb(1,49152,null,0,u.B,[a.h,a.k,a.x],null,null),(n()(),a.rb(2,0,null,0,11,"ion-toolbar",[],null,null,null,i.T,i.w)),a.qb(3,49152,null,0,u.Cb,[a.h,a.k,a.x],null,null),(n()(),a.rb(4,0,null,0,6,"ion-buttons",[["slot","start"]],null,null,null,i.A,i.d)),a.qb(5,49152,null,0,u.l,[a.h,a.k,a.x],null,null),(n()(),a.rb(6,0,null,0,4,"ion-button",[],null,null,null,i.z,i.c)),a.qb(7,49152,null,0,u.k,[a.h,a.k,a.x],null,null),(n()(),a.rb(8,0,null,0,2,"ion-back-button",[["defaultHref","/datapoints"]],null,[[null,"click"]],(function(n,t,l){var e=!0;return"click"===t&&(e=!1!==a.Cb(n,10).onClick(l)&&e),e}),i.y,i.b)),a.qb(9,49152,null,0,u.g,[a.h,a.k,a.x],{defaultHref:[0,"defaultHref"]},null),a.qb(10,16384,null,0,u.h,[[2,u.ib],u.Hb],{defaultHref:[0,"defaultHref"]},null),(n()(),a.rb(11,0,null,0,2,"ion-title",[],null,null,null,i.S,i.v)),a.qb(12,49152,null,0,u.Ab,[a.h,a.k,a.x],null,null),(n()(),a.Ib(13,0,["",""])),(n()(),a.rb(14,0,null,null,64,"ion-content",[["class","datapoint"]],null,null,null,i.C,i.f)),a.qb(15,49152,null,0,u.u,[a.h,a.k,a.x],null,null),(n()(),a.rb(16,0,null,0,13,"div",[["class","datapoint__datapoint-container"]],null,null,null,null,null)),(n()(),a.rb(17,0,null,null,9,"div",[["class","datapoint__datapoint-container__header"]],null,null,null,null,null)),(n()(),a.rb(18,0,null,null,4,"div",[["class","datapoint__datapoint-container__header__count"]],null,null,null,null,null)),(n()(),a.rb(19,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),a.Ib(20,null,["",""])),(n()(),a.rb(21,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),a.Ib(22,null,["+"," increase today"])),(n()(),a.rb(23,0,null,null,3,"ion-button",[["class","datapoint__datapoint-container__header__action"],["color","primary"],["fill","clear"],["size","large"]],null,[[null,"click"]],(function(n,t,l){var a=!0;return"click"===t&&(a=!1!==n.component.add()&&a),a}),i.z,i.c)),a.qb(24,49152,null,0,u.k,[a.h,a.k,a.x],{color:[0,"color"],fill:[1,"fill"],size:[2,"size"]},null),(n()(),a.rb(25,0,null,0,1,"ion-icon",[["name","add-circle-outline"]],null,null,null,i.I,i.l)),a.qb(26,49152,null,0,u.C,[a.h,a.k,a.x],{name:[0,"name"]},null),(n()(),a.rb(27,0,null,null,2,"div",[["class","datapoint__datapoint-container__graph"]],null,null,null,null,null)),(n()(),a.rb(28,0,null,null,1,"div",[],null,null,null,null,null)),a.qb(29,737280,null,0,d.e,[a.k],{chart:[0,"chart"]},null),(n()(),a.rb(30,0,null,0,48,"div",[["class","datapoint__datapoint-container"]],null,null,null,null,null)),(n()(),a.rb(31,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),a.Ib(-1,null,["Set an amount"])),(n()(),a.rb(33,0,null,null,45,"div",[["class","datapoint__datapoint-container__form"]],null,null,null,null,null)),(n()(),a.rb(34,0,null,null,12,"ion-item",[["no-lines",""],["no-padding",""]],null,null,null,i.K,i.n)),a.qb(35,49152,null,0,u.H,[a.h,a.k,a.x],null,null),a.qb(36,16384,null,0,u.d,[a.k],null,null),(n()(),a.rb(37,0,null,0,2,"ion-label",[["position","stacked"]],null,null,null,i.L,i.o)),a.qb(38,49152,null,0,u.N,[a.h,a.k,a.x],{position:[0,"position"]},null),(n()(),a.Ib(-1,0,["Value"])),(n()(),a.rb(40,0,null,0,6,"ion-input",[["name","value"],["placeholder","Value"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,t,l){var e=!0,o=n.component;return"ionBlur"===t&&(e=!1!==a.Cb(n,41)._handleBlurEvent(l.target)&&e),"ionChange"===t&&(e=!1!==a.Cb(n,41)._handleInputEvent(l.target)&&e),"ngModelChange"===t&&(e=!1!==(o.value.value=l)&&e),e}),i.J,i.m)),a.qb(41,16384,null,0,u.Mb,[a.k],null,null),a.Fb(1024,null,r.b,(function(n){return[n]}),[u.Mb]),a.qb(43,671744,null,0,r.e,[[8,null],[8,null],[8,null],[6,r.b]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),a.Fb(2048,null,r.c,null,[r.e]),a.qb(45,16384,null,0,r.d,[[4,r.c]],null,null),a.qb(46,49152,null,0,u.G,[a.h,a.k,a.x],{name:[0,"name"],placeholder:[1,"placeholder"],type:[2,"type"]},null),(n()(),a.rb(47,0,null,null,26,"div",[["class","datapoint__datapoint-container__form__row"]],null,null,null,null,null)),(n()(),a.rb(48,0,null,null,12,"ion-item",[["no-lines",""],["no-padding",""]],null,null,null,i.K,i.n)),a.qb(49,49152,null,0,u.H,[a.h,a.k,a.x],null,null),a.qb(50,16384,null,0,u.d,[a.k],null,null),(n()(),a.rb(51,0,null,0,2,"ion-label",[["position","stacked"]],null,null,null,i.L,i.o)),a.qb(52,49152,null,0,u.N,[a.h,a.k,a.x],{position:[0,"position"]},null),(n()(),a.Ib(-1,0,["Date"])),(n()(),a.rb(54,0,null,0,6,"ion-datetime",[["displayFormat","DD/MM/YYYY"],["name","date"],["placeholder","Date"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,t,l){var e=!0,o=n.component;return"ionBlur"===t&&(e=!1!==a.Cb(n,55)._handleBlurEvent(l.target)&&e),"ionChange"===t&&(e=!1!==a.Cb(n,55)._handleChangeEvent(l.target)&&e),"ngModelChange"===t&&(e=!1!==(o.value.date=l)&&e),e}),i.D,i.g)),a.qb(55,16384,null,0,u.Lb,[a.k],null,null),a.Fb(1024,null,r.b,(function(n){return[n]}),[u.Lb]),a.qb(57,671744,null,0,r.e,[[8,null],[8,null],[8,null],[6,r.b]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),a.Fb(2048,null,r.c,null,[r.e]),a.qb(59,16384,null,0,r.d,[[4,r.c]],null,null),a.qb(60,49152,null,0,u.v,[a.h,a.k,a.x],{displayFormat:[0,"displayFormat"],name:[1,"name"],placeholder:[2,"placeholder"]},null),(n()(),a.rb(61,0,null,null,12,"ion-item",[["no-lines",""],["no-padding",""]],null,null,null,i.K,i.n)),a.qb(62,49152,null,0,u.H,[a.h,a.k,a.x],null,null),a.qb(63,16384,null,0,u.d,[a.k],null,null),(n()(),a.rb(64,0,null,0,2,"ion-label",[["position","stacked"]],null,null,null,i.L,i.o)),a.qb(65,49152,null,0,u.N,[a.h,a.k,a.x],{position:[0,"position"]},null),(n()(),a.Ib(-1,0,["Time"])),(n()(),a.rb(67,0,null,0,6,"ion-datetime",[["displayFormat","H:mm A"],["name","time"],["placeholder","Time"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,t,l){var e=!0,o=n.component;return"ionBlur"===t&&(e=!1!==a.Cb(n,68)._handleBlurEvent(l.target)&&e),"ionChange"===t&&(e=!1!==a.Cb(n,68)._handleChangeEvent(l.target)&&e),"ngModelChange"===t&&(e=!1!==(o.value.time=l)&&e),e}),i.D,i.g)),a.qb(68,16384,null,0,u.Lb,[a.k],null,null),a.Fb(1024,null,r.b,(function(n){return[n]}),[u.Lb]),a.qb(70,671744,null,0,r.e,[[8,null],[8,null],[8,null],[6,r.b]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),a.Fb(2048,null,r.c,null,[r.e]),a.qb(72,16384,null,0,r.d,[[4,r.c]],null,null),a.qb(73,49152,null,0,u.v,[a.h,a.k,a.x],{displayFormat:[0,"displayFormat"],name:[1,"name"],placeholder:[2,"placeholder"]},null),(n()(),a.rb(74,0,null,null,4,"ion-button",[["class","datapoint__datapoint-container__form__save-button"],["color","primary"],["expand","block"],["type","submit"]],null,[[null,"click"]],(function(n,t,l){var a=!0;return"click"===t&&(a=!1!==n.component.setAmount()&&a),a}),i.z,i.c)),a.qb(75,49152,null,0,u.k,[a.h,a.k,a.x],{color:[0,"color"],disabled:[1,"disabled"],expand:[2,"expand"],type:[3,"type"]},null),(n()(),a.Ib(-1,0,[" Save "])),(n()(),a.gb(16777216,null,0,1,null,C)),a.qb(78,16384,null,0,c.j,[a.M,a.J],{ngIf:[0,"ngIf"]},null)],(function(n,t){var l=t.component;n(t,9,0,"/datapoints"),n(t,10,0,"/datapoints"),n(t,24,0,"primary","clear","large"),n(t,26,0,"add-circle-outline"),n(t,29,0,l.chart),n(t,38,0,"stacked"),n(t,43,0,"value",l.value.value),n(t,46,0,"value","Value","text"),n(t,52,0,"stacked"),n(t,57,0,"date",l.value.date),n(t,60,0,"DD/MM/YYYY","date","Date"),n(t,65,0,"stacked"),n(t,70,0,"time",l.value.time),n(t,73,0,"H:mm A","time","Time"),n(t,75,0,"primary",l.value.loading,"block","submit"),n(t,78,0,l.value.loading)}),(function(n,t){var l=t.component;n(t,13,0,l.datapoint.dataPointName?l.datapoint.dataPointName:"Loading..."),n(t,20,0,l.datapoint.value),n(t,22,0,l.getIncreaseToday()),n(t,40,0,a.Cb(t,45).ngClassUntouched,a.Cb(t,45).ngClassTouched,a.Cb(t,45).ngClassPristine,a.Cb(t,45).ngClassDirty,a.Cb(t,45).ngClassValid,a.Cb(t,45).ngClassInvalid,a.Cb(t,45).ngClassPending),n(t,54,0,a.Cb(t,59).ngClassUntouched,a.Cb(t,59).ngClassTouched,a.Cb(t,59).ngClassPristine,a.Cb(t,59).ngClassDirty,a.Cb(t,59).ngClassValid,a.Cb(t,59).ngClassInvalid,a.Cb(t,59).ngClassPending),n(t,67,0,a.Cb(t,72).ngClassUntouched,a.Cb(t,72).ngClassTouched,a.Cb(t,72).ngClassPristine,a.Cb(t,72).ngClassDirty,a.Cb(t,72).ngClassValid,a.Cb(t,72).ngClassInvalid,a.Cb(t,72).ngClassPending)}))}function v(n){return a.Jb(0,[(n()(),a.rb(0,0,null,null,1,"app-datapoint",[],null,null,null,m,h)),a.qb(1,114688,null,0,g,[b.a,_.a,u.Nb],null,null)],(function(n,t){n(t,1,0)}),null)}var M=a.nb("app-datapoint",g,v,{},{},[]);class P{}l.d(t,"DatapointPageModuleNgFactory",(function(){return f}));var f=a.ob(e,[],(function(n){return a.zb([a.Ab(512,a.j,a.Z,[[8,[o.a,M]],[3,a.j],a.v]),a.Ab(4608,c.l,c.k,[a.s,[2,c.w]]),a.Ab(4608,r.g,r.g,[]),a.Ab(4608,u.b,u.b,[a.x,a.g]),a.Ab(4608,u.Gb,u.Gb,[u.b,a.j,a.p]),a.Ab(4608,u.Jb,u.Jb,[u.b,a.j,a.p]),a.Ab(1073742336,c.b,c.b,[]),a.Ab(1073742336,r.f,r.f,[]),a.Ab(1073742336,r.a,r.a,[]),a.Ab(1073742336,u.Eb,u.Eb,[]),a.Ab(256,d.c,[],[]),a.Ab(512,d.d,d.d,[d.c]),a.Ab(1073742336,d.b,d.b,[d.d]),a.Ab(1073742336,b.p,b.p,[[2,b.u],[2,b.m]]),a.Ab(1073742336,P,P,[]),a.Ab(1073742336,e,e,[]),a.Ab(1024,b.k,(function(){return[[{path:"",component:g}]]}),[])])}))}}]);